# 小米   Java服务端开发

# 岗位描述

岗位职责：

1.参与小米公司级别平台后端服务, 负责项目建设与支持; 

2.工作踏实负责，能积极有效与工作中的公司内部和外部合作方沟通； 

3.持续服务优化, 负责建设高并发,高可用系统;  

4.能调研和解决最终用户的实际问题; 

5.参与服务端基础组件研发,核心架构建设, 负责技术调研,技术方案实施与研发;。

# 岗位要求

1、两年及以上后台服务器开发经验(有大型服务开发经验者优先);

2、精通Java编程，具备丰富的编程经验，能够熟练应用restlet/mybatis/spring等主流开发框;

3、熟悉分布式系统的设计和应用，熟悉分布式锁、NoSQL、消息队列等机制;

4、技术基础扎实，精通操作系统原理、数据结构、算法、网络编程和多线程编程等技术;

5、具备优秀的逻辑思维能力，善于分析和解决问题 ，对解决挑战性问题充满热情;

6、善于学习新知识，动手能力强，并有强烈的进取心。



# 面试过程





# 流程猜测

- 自我简介
- 项目中遇到的最大的难题，怎么解决的
- 谈谈你对小米的认识      
- java 和go的区别
- mysql 和mongodb的区别
- 设计一个秒杀系统

# 他山之石

## 数据结构与算法

### 你所知道的排序算法有哪些，哪些是基于比较的

[排序算法](/数据结构与算法/算法/sort.html)

- 基于比较的排序
  + 堆排序
  + 选择排序  插入排序  冒泡排序

时间复杂度和空间复杂 稳定性

### 快排的步骤，你认为最关键的一步是哪个，最差情况的时间复杂度

写快拍

再写个快排非递归

递归会出现什么问题

### 讲桶排序，桶排序为什么是稳定的，桶排序维持稳定是否需要额外空间    

### 二叉树遍历

[java二叉树遍历——深度优先(DFS)与广度优先(BFS) 递归版与非递归版](https://www.cnblogs.com/liyao0312/p/11401019.html)

二叉树层级遍历 同时输入层数

### 你所知道的数据结构有哪些？       

讲一下什么是B 树

### 讲一下[红黑树](/studynotes/数据结构与算法/数据结构/tree.html#红黑树)，插入数据时怎么判断红黑树是否平衡      

红黑树

一般是用平衡因子差值判断是否平衡并通过旋转来实现平衡，左右子树树高不超过1



### 输出一个数组中某元素出现的次数超过数组长度一半的元素，没有则输出null。

二叉搜索树的 two sum 问题

链表反转

算法：链表1->2->3>4反转为1>4>2>3。

二分查找

二叉树公共父节点

n个新字符串插入到一个源字符串的指定位置。比较简单，实现的时候和面试官讨论了一波算法复杂度问题

给一个数列，输出top k

## javacore

### 基础

#### 数组链表区别

- 数组

  一、数组的特点
  1.在内存中，数组是一块连续的区域 
  2.数组需要预留空间

  在使用前需要提前申请所占内存的大小，这样不知道需要多大的空间，就预先申请可能会浪费内存空间，即数组空间利用率低 
  ps：数组的空间在编译阶段就需要进行确定，所以需要提前给出数组空间的大小（在运行阶段是不允许改变的）

  3.在数组起始位置处，插入数据和删除数据效率低。

  插入数据时，待插入位置的的元素和它后面的所有元素都需要向后搬移 
  删除数据时，待删除位置后面的所有元素都需要向前搬移

  4.随机访问效率很高，时间复杂度可以达到O(1)

  因为数组的内存是连续的，想要访问那个元素，直接从数组的首地址处向后偏移就可以访问到了

  5.数组开辟的空间，在不够使用的时候需要扩容，扩容的话，就会涉及到需要把旧数组中的所有元素向新数组中搬移 
  6.数组的空间是从栈分配的

  二、数组的优点
  随机访问性强，查找速度快，时间复杂度为O(1)

  三、数组的缺点
  1.头插和头删的效率低，时间复杂度为O(N) 
  2.空间利用率不高 
  3.内存空间要求高，必须有足够的连续的内存空间 
  4.数组空间的大小固定，不能动态拓展

- 链表
  一、链表的特点
  1.在内存中，元素的空间可以在任意地方，空间是分散的，不需要连续 
  2.链表中的元素都会两个属性，一个是元素的值，另一个是指针，此指针标记了下一个元素的地址

  每一个数据都会保存下一个数据的内存的地址，通过此地址可以找到下一个数据

  3.查找数据时效率低,时间复杂度为O(N)

  因为链表的空间是分散的，所以不具有随机访问性，如要需要访问某个位置的数据，需要从第一个数据开始找起，依次往后遍历，直到找到待查询的位置，故可能在查找某个元素时，时间复杂度达到O(N)

  4.空间不需要提前指定大小，是动态申请的，根据需求动态的申请和删除内存空间，扩展方便，故空间的利用率较高 
  5.任意位置插入元素和删除元素效率较高，时间复杂度为O(1) 
  6.链表的空间是从堆中分配的

  二、链表的优点
  1.任意位置插入元素和删除元素的速度快，时间复杂度为O(1) 
  2.内存利用率高，不会浪费内存 
  3.链表的空间大小不固定，可以动态拓展

  三、链表的缺点
  随机访问效率低，时间复杂度为0(N)

- ##### 对于想要快速访问数据，不经常有插入和删除元素的时候，选择数组

  ##### **对于需要经常的插入和删除元素，而对访问元素时的效率没有很高要求的话，选择链表**

StringBuild和StringBuffer的区别

#### 接口和抽象类的区别    

[抽象类（abstract-class）与接口（interface）有什么异同](/javacore/basics/basics.html#抽象类（abstract-class）与接口（interface）有什么异同)

#### 讲解继承与组合的区别

#### 谈谈volatile关键字 

重载和重写的区别

const的用法，const多态原理

### 容器

HashSet 的底层实现

聊JAVA的集合set，set怎安实现允许重复的

hashMap底层实现

stl 中set map底层实现，与hashtable的差异，使用情况。

### 多线程

多线程，线程池，四中线程池。

#### java中怎么创建 一个线程

[2.2. 创建线程有哪些方式？这些方法各自利弊是什么？](/javacore/concurrent/Java多线程面试题集.html#22-创建线程有哪些方式？这些方法各自利弊是什么？)

#### 如何实现java多线程

1. 继承Thread类，重写run()方法
2. 实现Runnable 接口，并实现该接口的run()方法

#### run()方法和start()方法的区别  

[`start()` 和 `run()` 有什么区别？可以直接调用 `Thread` 类的 `run()` 方法么？](/javacore/concurrent/Java多线程面试题集.html#24-start-和-run-有什么区别？可以直接调用-thread-类的-run-方法么？)

#### 线程怎么同步？       

#### 多线程同步的实现方法有哪些

1. synchronized关键字

   在Java语言中，每个对象都有一个对象锁与之相关联，该锁表明对象在任何时候只允许被一个线程所拥有，当一个线程调用对象的一段synchronized代码时，需要先获取这个锁，然后去执行相应的代码，执行结束后，释放锁。synchronized关键字有两种用法，synchronized方法和synchronized块。该关键字还可以作用于静态方法、类或某个实例。

​      1.1 synchronized方法，在方法的声明前加入synchronized关键字。

​      1.2 synchronized块，既可以把任意的代码段声明为synchronized，也可以指定上锁的对象，有非常的灵活性。

2. wait( ) 方法 与 notify( ) 方法

- wait():使一个线程处于等待状态，并且释放所持有的对象的lock。
- sleep():使一个正在运行的线程处于睡眠状态，是一个静态方法，调用此方法要捕捉InterruptedException异常。
- notify():唤醒一个处于等待状态的线程，注意的是在调用此方法的时候，并不能确切的唤醒某一个等待状态的线程，而是由JVM确定唤醒哪个线程，而且不是按优先级。
- Allnotity():唤醒所有处入等待状态的线程，注意并不是给所有唤醒线程一个对象的锁，而是让它们竞争。

2. Lock

   JDK5新增加了Lock接口以及它的一个实现类ReentranLock，Lock也可以用来实现多线程的同步。

   ​	❶lock()。以阻塞的方式获取锁，如果获取到了锁，立即返回；如果别的线程持有锁，当前线程等待，直到获取锁后返回。

   ​	❷tryLock()。以非阻塞的方式获取锁。只是尝试性地去获取一下锁，如果获取到锁，立即返回true，否则，立即返回false。

   ​	❸tryLock(long timeout, TimeUnit unit)。如果获取了锁，立即返回，否则会等待参数给定的时间单元，在等待的过程中，如果获取了锁，就返回true，如果等待超时，返回false。

   ​	❹lockInterruptibly()。如果获取了锁，立即返回，如果没有获取锁，当前线程处于休眠状态，直到获得锁，或者当前线程被别的线程中断(会受到InterruptedException异常)。它与lock()方法最大的区别在于如果lock()方法获取不到锁，会一直处于阻塞状态，且会忽略interrupt()方法。

#### synchronized具体怎么用？能给什么对象上锁？    

对象锁锁住的是，同样由synchronized修饰的方法或代码段。当然，这里排除了类锁。

#### Lock和synchronized的区别？它们都是可重入锁吗？哪个效率更高？     

  [java并发之Lock与synchronized的区别]([https://blog.csdn.net/tomcat_2014/article/details/53542548](https://blog.csdn.net/tomcat_2014/article/details/53542548))

当需要以下高级特性时，才应该使用Lock：可定时的、可轮询的与可中断的锁获取操作，公平队列，或者非块结构的锁。否则，请使用synchronized。     

#### 锁有哪几种？可重入锁和不可重入锁的区别？      

#### 多线程中锁的种类    

- [公平锁/非公平锁](/javacore/concurrent/锁.html#公平锁非公平锁)
- [可重入锁](/javacore/concurrent/锁.html#可重入锁)
- [独享锁/共享锁](/javacore/concurrent/锁.html#独享锁共享锁)
- [互斥锁/读写锁](/javacore/concurrent/锁.html#互斥锁读写锁)
- [乐观锁/悲观锁](/javacore/concurrent/锁.html#乐观锁悲观锁)
- [分段锁](/javacore/concurrent/锁.html#分段锁)
- [偏向锁/轻量级锁/重量级锁](/javacore/concurrent/锁.html#偏向锁轻量级锁重量级锁)
- [自旋锁](/javacore/concurrent/锁.html#自旋锁)

### 虚拟机

jvm了解吗？说一下你了解的jvm

说说JVM，内存区。

jvm启动的底层是怎么实现的

类装载机制了解吗？怎么实现的

###输入输出io

## javaweb

websocket在聊天室中的使用方式

Spring的 IOC原理

SpringMVC请求流程）

二面问了事务的实现原理（redo+undo），

MVCC,引擎之间的区别，

项目中用到了MapReduce，讲一下map和reduce的过程       

## 数据库

### 谈谈对数据库索引的理解       

[frank-lam 索引](https://frank-lam.github.io/fullstack-tutorial/#/MySQL?id=_8-%e7%b4%a2%e5%bc%95) 

从SQL优化角度谈谈索引    

索引的数据结构，

b和b+的区别

左右连接

又问了数据库语句，第一个是查询分组计数，第二个是数据量大的时候使用limit分页，越往后查询越慢，怎么优化查询？

## 操作系统

进程间的通信方式

###  linux

#### Linux管道的作用

linux 常用指令介绍，chmod命令权限修改解释下

## 网络通信

（TCP该问的都问了）

三次握手，四次挥手

[http中get与post的区别](/network/network-interview.html#get和post区别)    

[http状态码有哪几种](/network/http.html#http-状态码)                [HTTP 状态码](/network/http.html#http-状态码)            

[在浏览器中输入一个网址，浏览器的处理过程，涉及哪些层，用了哪些协议？ ](/network/network-interview.html#在浏览器中输入网址后执行的全部过程)

如果上面的是基于HTTPS的请求，会增加哪些流程呢（即HTTPS请求的流程）。HTTPS里面的对称加密的密钥是怎么发送的，能用RSA的私钥加密比它大的数据吗？

[tcp和udp的区别](/network/network-transport.html#udp-和-tcp-的特点)

tcp的三次握手和四次挥手，

TCP滑动窗口

协程？（没听说过）

慢开始和拥塞控制原理，

## 设计模式

[设计模式之单例模式](https://www.cnblogs.com/liyao0312/p/11419013.html)







